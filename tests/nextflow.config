params {
    // Limit resources so that this can run on GitHub Actions
    max_cores          = 2
    memory             = '6.GB'

    // Input data to test amplicon analysis
    fastq              = "$baseDir/tests/amplicon_artic_v1_samplesheet.csv"
    list               = true
    run_id             = 'test'
    primer_version     = 'V1'

    adapter            = "$baseDir/data/adapters/NexteraTransposase.fasta"

    frac               = 0.2
}

if ("$PROFILE" == "singularity") {
    singularity.enabled = true
    singularity.autoMounts = true
    includeConfig "$baseDir/configs/container.config"
} else if ("$PROFILE" == "conda") {
    conda.enabled=true
    includeConfig "$baseDir/configs/conda.config"
} else {
    docker.enabled = true
    docker.userEmulation = true
    docker.runOptions = "--platform linux/x86_64"
    includeConfig "$baseDir/configs/container.config"
}

// Increase time available to build Conda environment
conda { createTimeout = "120 min" }